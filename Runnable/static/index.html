<html>
<head>
<title>Plataforma</title>
<script type="text/javascript"
	src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>

	<h1>Plataforma Info</h1>

	<p>Todos os serviços encontram se disponiveis tanto em Rest como em
		Soap.</p>
	<p>Rest Endpoint : /rest/</p>
	<p>Soap Endpoint : /soap/</p>

	<p>
		WSDL : <a href="/soap/framework.wsdl">/soap/framework.wsdl</a>
	</p>



	<h1>Serviços</h1>

	<h2>Listar Repositorios</h2>

	<p>Lista todos os repositorios presentes na platforma</p>


	<p>
		Rest: <a href="/rest/listRepositories">/rest/listRepositories</a>
	</p>

	<p>Soap:</p>


	<h2>Pesquisa por termo</h2>

	<p>Realizar pesquisa por termo nos repositorios</p>


	<p>
		Termo : <input class="term" type="text" value="London">
		Repositorios : <input class="repositoriosTerm" type="text" value="">
	</p>

	<p>
		Ignorar Extra Properties : <input class="ignoreExtraPropertiesTerm"
			type="checkbox"> Desligar detector de relações : <input
			class="disableRelationTerm" type="checkbox">
	</p>
	<p>
		Desligar Combinar Artefacto : <input class="disableCombineTerm"
			type="checkbox">
	</p>


	<p>Rest Request:
	<div class="restTerm"></div>
	</p>


	<script>
		$(".term").change(function() {
			termUrl();
		});

		$(".ignoreExtraPropertiesTerm").change(function() {
			termUrl();
		});

		$(".disableCombineTerm").change(function() {
			termUrl();
		});

		$(".disableRelationTerm").change(function() {
			termUrl();
		});

		$(".repositoriosTerm").change(function() {
			termUrl();
		});

		function termUrl() {
			$(".restTerm").empty();
			if (!$("input.term").val().trim()) {
				$(".restTerm").text("Term cannot be empty");
			} else {
				var url = "/rest/searchByTerm?";
				url += "term=" + $("input.term").val().trim();

				if ($("input.ignoreExtraPropertiesTerm").is(':checked'))
					url += "&ignoreExtraProperties=true";

				if ($("input.disableRelationTerm").is(':checked'))
					url += "&disableRelation=true";

				if ($("input.disableCombineTerm").is(':checked'))
					url += "&disableCombine=true";

				if ($("input.repositoriosTerm").val().trim()) {

					var repositories = $("input.repositoriosTerm").val().trim()
							.split(",");

					url += "&repositories=";

					var arrayLength = repositories.length;
					for (var i = 0; i < arrayLength; i++) {
						url += repositories[i].trim();

						if (i < arrayLength - 1)
							url += ",";
					}

				}

				$(".restTerm").html('<a href="'+ url +'">' + url + '</a>');

			}
		}

		$(document).ready(function() {
			termUrl();
		});
	</script>


	<h2>Pesquisa por cordenadas</h2>

	<p>Realizar pesquisa por cordenadas em caixa nos repositorios</p>


	<p>
		Latitude de : <input class="latitudeFrom" type="number" value="44">
		Latitude para : <input class="latitudeTo" type="number" value="48">
	</p>
	<p>
		Longitude de : <input class="longitudeFrom" type="number" value="6">
		Longitude para : <input class="longitudeTo" type="number" value="8">
	</p>


	<p>
		Ignorar Extra Properties : <input class="ignoreExtraPropertiesBox"
			type="checkbox"> Desligar detector de relações : <input
			class="disableRelationBox" type="checkbox">
	</p>
	<p>
		Desligar Combinar Artefacto : <input class="disableCombineBox"
			type="checkbox"> Repositorios : <input
			class="repositoriosBox" type="text" value="">
	</p>



	<p>Rest Request:
	<div class="restBox"></div>
	</p>


	<script>
		$(".latitudeFrom").change(function() {
			boxUrl();
		});
		$(".latitudeTo").change(function() {
			boxUrl();
		});
		$(".longitudeFrom").change(function() {
			boxUrl();
		});
		$(".longitudeTo").change(function() {
			boxUrl();
		});
		$(".ignoreExtraPropertiesBox").change(function() {
			boxUrl();
		});
		$(".disableRelationBox").change(function() {
			boxUrl();
		});
		$(".disableCombineBox").change(function() {
			boxUrl();
		});
		$(".repositoriosBox").change(function() {
			boxUrl();
		});

		function boxUrl() {
			$(".restBox").empty();
			if (!$("input.latitudeFrom").val().trim() || !$("input.latitudeTo").val().trim() || !$("input.longitudeFrom").val().trim() || !$("input.longitudeTo").val().trim() ) {
				$(".restBox").text("Coardinates cannot be empty");
			} else {
				var url = "/rest/searchByBox?";
				url += "latitudeFrom="+$("input.latitudeFrom").val().trim()+"&latitudeTo="+$("input.latitudeTo").val().trim() +"&longitudeFrom="+$("input.longitudeFrom").val().trim()+"&longitudeTo=" + $("input.longitudeTo").val().trim();

				if ($("input.ignoreExtraPropertiesBox").is(':checked'))
					url += "&ignoreExtraProperties=true";

				if ($("input.disableRelationBox").is(':checked'))
					url += "&disableRelation=true";

				if ($("input.disableCombineBox").is(':checked'))
					url += "&disableCombine=true";

				if ($("input.repositoriosBox").val().trim()) {

					var repositories = $("input.repositoriosBox").val().trim()
							.split(",");

					url += "&repositories=";

					var arrayLength = repositories.length;
					for (var i = 0; i < arrayLength; i++) {
						url += repositories[i].trim();

						if (i < arrayLength - 1)
							url += ",";
					}

				}

				$(".restBox").html('<a href="'+ url +'">' + url + '</a>');

			}
		}

		$(document).ready(function() {
			boxUrl();
		});
	</script>

</body>
</html>
